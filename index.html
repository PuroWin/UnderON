<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UnderON - Estratégia 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 min-h-screen text-white">
    <nav class="bg-blue-600 p-4 shadow-xl border-b-4 border-blue-800 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-black italic tracking-tighter text-white">UNDER ON <span class="text-blue-200 text-[10px] block leading-none tracking-normal">PROJETO 2026</span></h1>
            <div id="relogio" class="text-xs font-mono bg-blue-900 px-2 py-1 rounded border border-blue-400"></div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <div id="status" class="mb-6 p-3 bg-blue-800/30 rounded-lg text-sm border border-blue-500/50 text-center animate-pulse text-blue-200 font-bold">
            Sincronizando com a rede de dados...
        </div>
        
        <div id="match-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
    </div>

    <script>
        const API_KEY = "54d522ccd4msh0f4dec56b15afa7p14a261jsn69499ae84eea";
        const API_HOST = "api-football-v1.p.rapidapi.com";

        setInterval(() => {
            document.getElementById('relogio').innerText = new Date().toLocaleTimeString('pt-BR');
        }, 1000);

        async function getMatches() {
            const statusDiv = document.getElementById('status');
            const container = document.getElementById('match-container');
            
            try {
                // Tenta buscar jogos AO VIVO primeiro
                let response = await fetch(`https://${API_HOST}/v3/fixtures?live=all`, {
                    method: "GET",
                    headers: { "x-rapidapi-host": API_HOST, "x-rapidapi-key": API_KEY }
                });

                let data = await response.json();

                // Se não houver nada ao vivo, busca a grade do dia (Brasil)
                if (!data.response || data.response.length === 0) {
                    const agora = new Date();
                    const dataHoje = agora.getFullYear() + "-" + 
                                   String(agora.getMonth() + 1).padStart(2, '0') + "-" + 
                                   String(agora.getDate()).padStart(2, '0');
                    
                    response = await fetch(`https://${API_HOST}/v3/fixtures?date=${dataHoje}`, {
                        method: "GET",
                        headers: { "x-rapidapi-host": API_HOST, "x-rapidapi-key": API_KEY }
                    });
                    data = await response.json();
                }

                renderMatches(data.response);

            } catch (error) {
                statusDiv.innerText = "Erro de conexão ou limite de cota atingido.";
                console.error(error);
            }
        }

        function renderMatches(jogos) {
            const statusDiv = document.getElementById('status');
            const container = document.getElementById('match-container');
            container.innerHTML = '';

            if (!jogos || jogos.length === 0) {
                statusDiv.innerText = "Nenhum jogo disponível na API no momento.";
                statusDiv.classList.remove('animate-pulse');
                return;
            }

            statusDiv.innerText = `${jogos.length} JOGOS MONITORADOS PARA UNDER`;
            statusDiv.classList.remove('animate-pulse', 'bg-blue-800/30');
            statusDiv.classList.add('bg-emerald-600', 'text-white');

            jogos.slice(0, 50).forEach(match => {
                const card = document.createElement('div');
                card.className = "bg-slate-800 p-5 rounded-2xl shadow-2xl border border-slate-700 hover:border-blue-500 transition-all";
                
                const hora = match.fixture.date.split('T')[1].substring(0,5);
                const statusJogo = match.fixture.status.short === '1H' || match.fixture.status.short === '2H' ? 'AO VIVO' : hora;
                
                card.innerHTML = `
                    <div class="flex justify-between text-[10px] font-bold text-slate-400 mb-3 border-b border-slate-700 pb-2 uppercase tracking-widest">
                        <span>${match.league.name}</span>
                        <span class="${statusJogo === 'AO VIVO' ? 'text-red-500 animate-pulse' : 'text-blue-400'} text-sm">${statusJogo}</span>
                    </div>
                    
                    <div class="flex justify-between items-center mb-6">
                        <div class="text-center w-[45%]">
                            <img src="${match.teams.home.logo}" class="w-10 h-10 mx-auto mb-2 object-contain">
                            <p class="text-[11px] font-black leading-tight uppercase">${match.teams.home.name}</p>
                            <span class="text-lg font-bold">${match.goals.home ?? 0}</span>
                        </div>
                        <div class="font-black text-slate-600 text-lg italic">VS</div>
                        <div class="text-center w-[45%]">
                            <img src="${match.teams.away.logo}" class="w-10 h-10 mx-auto mb-2 object-contain">
                            <p class="text-[11px] font-black leading-tight uppercase">${match.teams.away.name}</p>
                            <span class="text-lg font-bold">${match.goals.away ?? 0}</span>
                        </div>
                    </div>

                    <div class="bg-emerald-900/40 p-2 rounded border border-emerald-500/30 flex justify-between items-center">
                        <div>
                            <p class="text-[9px] text-emerald-400 uppercase font-black tracking-tighter">Sugestão UnderON</p>
                            <p class="text-xs font-black text-emerald-100 italic font-mono uppercase">Menos de 4.5 Gols</p>
                        </div>
                        <div class="bg-emerald-500 text-emerald-900 text-[10px] font-black px-2 py-1 rounded">SEGURO</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        getMatches();
    </script>
</body>
</html>
